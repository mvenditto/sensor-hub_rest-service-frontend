<html>
  <head>
    <!--<link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">-->
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="css/onsen-css-components.min.css">
    <link rel="stylesheet" href="css/vis-network.min.css"/>
    <!--<link rel="stylesheet" href="css/stylesheet.css">-->
    <link rel="stylesheet" href="css/json.css">
    <link rel="stylesheet" href="css/jquery.enhsplitter.css">
    <link rel="stylesheet" href="css/jquery.qtip.min.css">
    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/web-animations.min.js"></script>
    <script src="js/hammer.min.js"></script>
    <script src="js/vis.js"></script>
    <script src="js/index.js"></script>
    <script src="js/sh-graph.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/jquery.enhsplitter.js"></script>
    <script src="js/smoothie.js"></script>
    <script src="js/interact.min.js"></script>
    <script src="js/jquery.qtip.min.js"></script>
    <script type="text/javascript" src="js/renderjson.js"></script>
    <style>
        #mynetwork {
            border: 1px solid darkgray;
            background-color: #d3d3d3;
            overflow: hidden;
            width: 100%;
        }

        #globalview {
            border: 1px solid darkgray;
            background-color: #d3d3d3;
            overflow: hidden;
            width: 100%;
        }

        #netexplorer {
          height: 99%;
        }

        #my-dialog2 .dialog {
          width: 420px;
        }

        #cfg-dialog .dialog, .dialog-container{
          width: 400px;
        }


        div.jsoneditor {
          border: 1px solid black;
        }
        div.jsoneditor-menu {
          background-color: #2c3a47;
          border-bottom: 1px solid gray;
        }

        .qtip-content {
          font-size: 1.5em;
        }

        .splitter_panel {
          overflow: hidden;
        }

        .toast--success__message {
          color: lightgreen;
        }

        .toast--failure__message {
          color: red;
        }

        a#task-result {
          color: #bdc7be;
        }

        ons-input .text-input__container input {
          width: 100%;
          display: inline-block;
        }

        .grid {
          position: relative;
          border: 5px solid transparent;
        }
        .item {
          display: inline-block;
          position: absolute;
          //width: 500px;
          //height: 150px;
          min-width:300px;
          min-height:100px;
          z-index: 1;
          box-sizing: border-box;
          background-color: #dddddd;
          margin:20px;
          padding: 4px 4px 6px;
        }
        .item.muuri-item-hidden {
          z-index: 0;
        }
        .item.muuri-item-releasing {
          z-index: 2;
        }
        .item.muuri-item-dragging {
          z-index: 3;
        }
        .item-content {
          position: relative;
          text-align: center;
          background: #dddddd;
          color: white;
          border: 1px solid #bcbcbc;
          //padding: 2%;
        }

        .item.muuri-item-dragging .item-content,
        .item.muuri-item-releasing .item-content {
          background: blue;
        }

        .item-item {
          position: relative;
          display: block;
          box-sizing: border-box;
        }

        div.smoothie-chart-tooltip {
          background: #444;
          padding: 1em;
          margin-top: 20px;
          font-family: consolas;
          color: white;
          font-size: 10px;
          pointer-events: none;
        }

        ons-select {
          width:100%;
          border: 1px solid gray;
        }

        select.select-input {
          padding-left: 5%;
        }

        canvas {
          //position: relative;
          //display: block;
          width: 100%;
          height: 100%;
        }

    ::-webkit-scrollbar-button{
        display: none;
        height: 13px;
        border-radius: 0px;
        background-color: #AAA;
    }
    ::-webkit-scrollbar-button:hover{
        background-color: #2c3a47;
    }
    ::-webkit-scrollbar-thumb{
        background-color: #606f7c;
    }
    ::-webkit-scrollbar-thumb:hover{
        background-color: #91a5b6;
    }
    ::-webkit-scrollbar-track{
        background-color: #2c3a47;
    }
    ::-webkit-scrollbar-track:hover{
        background-color: #2c3a47;
    }
    ::-webkit-scrollbar{
        width: 8px;//13
    }

    pre {
      padding: 20px;
      overflow: auto;
      color: #716a6a;
      text-shadow: none;
    	background-color: #2c3a47;
      border: 1px solid #0d0d0d;
    }
    pre code {
      padding: 0;
      color: #767474;
      background-color: #efeff4;
      border: none;
    }
    pre a {
      color: #FEA47F;
    }

    </style>
  </head>



  <ons-splitter>
    <ons-splitter-side id="menu" side="left" width="220px" collapse>
      <ons-page>
        <ons-list>
          <ons-list-item onclick="fn.loadPage('home.html')" tappable>
            Home
          </ons-list-item>
        </ons-list>
      </ons-page>
    </ons-splitter-side>
    <!--<ons-splitter-content id="content" page="home.html"></ons-splitter-content>-->
    <ons-navigator id="content" page="home.html"></ons-navigator>
  </ons-splitter>

  <template id="home.html">
    <ons-page>
      <ons-toolbar>
        <div class="left">
          <ons-toolbar-button onclick="fn.open()">
            <ons-icon icon="md-menu"></ons-icon>
          </ons-toolbar-button>
        </div>
        <div class="right">
          <ons-toolbar-button onclick="toggleGraphMenu()">
            <ons-icon id="toggle-graph-menu" icon="md-chevron-down"></ons-icon>
          </ons-toolbar-button>
        </div>
        <div class="center">
          Sensors-Hub Node Network
        </div>
      </ons-toolbar>
      <div id="root-container">
        <div id="netexplorer"></div>
        <div id="ttt">
          <div id="globalview"></div>
          <div id="mynetwork"></div>
        </div>
      </div>
      <script type="text/javascript">

        ons.getScriptPage().onInit = function() {

          renderjson.set_show_to_level(1);
          $('#root-container').enhsplitter({position: '30%'});
          $('#ttt').enhsplitter({position: '35%', vertical: false});
          $(document).ready(r =>
            shBuildSystemGraph()
          )

          this.onShow = function() {   console.log("onShow") };
          this.onHide = function() {   console.log("onHide") };
          this.onDestroy = function() {   console.log("onDestroy") };
        };

      </script>
    </ons-page>
  </template>

  <template id="dialog.html">
    <ons-alert-dialog id="my-dialog" modifier="rowfooter">
      <div class="alert-dialog-title">Alert</div>
      <div class="alert-dialog-content">
       Are you sure?
      </div>
      <div class="alert-dialog-footer">
        <ons-alert-dialog-button onclick="deleteDevice();hideDialog('my-dialog');">Ok</ons-alert-dialog-button>
        <ons-alert-dialog-button onclick="hideDialog('my-dialog')">Cancel</ons-alert-dialog-button>
      </div>
    </ons-alert-dialog>
  </template>

  <ons-modal id="loading-modal" direction="up">
    <div style="text-align: center">
      <p>
        <ons-icon icon="fa-spinner" size="28px" spin></ons-icon> Loading...
      </p>
    </div>
  </ons-modal>

  <template id="cfg-dialog.html">
    <ons-dialog id="cfg-dialog">
      <div class="container" style="text-align: center; padding: 10px;">
          <p>Configuration (json)</p>
          <!--<div id ="devCfg" style="width:380px; height: 250px;"></div>-->
          <textarea id ="devCfg" class="textarea" rows="15" style="width:100%;" ></textarea>
      </div>
      <div style="text-align: center; padding: 10px;">
        <p><ons-button onclick="hideDialog('cfg-dialog')">Close</ons-button></p>
      </div>
    </ons-dialog>
  </template>

  <template id="dialog2.html">
    <ons-dialog id="my-dialog2">
      <div style="text-align: center; padding: 10px;">
        <p>
          Set Custom Properties.
        </p>

        <ons-row style="margin-bottom: 4px;">
          <ons-col style="text-align: left;">
            <label class="left">
              DataStream
              <ons-toolbar-button onclick="dsSelect();">
                <ons-icon icon="fa-refresh"></ons-icon>
              </ons-toolbar-button>
            </label>
          </ons-col>
          <ons-col>
            <ons-select id="cp_dss"></ons-select>
          </ons-col>
        </ons-row>

        <ons-row style="margin-bottom: 4px;">
          <ons-col style="text-align: left;">
            <label class="left">
            <ons-checkbox input-id="check-1" onchange="toggleEnabled('cp_name')"></ons-checkbox>
            </label>
            <label for="check-1" class="center"> Name </label>
          </ons-col>
          <ons-col>
            <textarea id ="cp_name" class="textarea" rows="1" style="width:100%;" disabled></textarea>
          </ons-col>
        </ons-row>

        <ons-row style="margin-bottom: 4px;">
          <ons-col style="text-align: left;">
            <label class="left">
            <ons-checkbox input-id="check-2" onchange="toggleEnabled('cp_desc')"></ons-checkbox>
            </label>
            <label for="check-2" class="center"> Description </label>
          </ons-col>
          <ons-col>
            <textarea id ="cp_desc" class="textarea" rows="1" style="width:100%;" disabled></textarea>
          </ons-col>
        </ons-row>

        <ons-row style="margin-bottom: 8px;margin-top:8px;">
          <ons-col style="text-align: left;">
            <label class="left">
            <ons-checkbox input-id="check-3"
            onchange="toggleEnabled('cp_fov_name');toggleEnabled('cp_fov_desc');toggleEnabled('cp_fov_enc');toggleEnabled('cp_fov_feat')"></ons-checkbox>
            </label>
            <label for="check-3" class="center"> Feature of Interest </label>
          </ons-col>
        </ons-row>

        <ons-row style="margin-bottom: 4px;">
          <ons-col style="text-align: left;">Name</ons-col>
          <ons-col><textarea id ="cp_fov_name" class="textarea" rows="1" style="width:100%;" disabled></textarea></ons-col>
        </ons-row>

        <ons-row style="margin-bottom: 4px;">
          <ons-col style="text-align: left;">Description</ons-col>
          <ons-col><textarea id ="cp_fov_desc" class="textarea" rows="1" style="width:100%;" disabled></textarea></ons-col>
        </ons-row>

        <ons-row style="margin-bottom: 4px;">
          <ons-col style="text-align: left;">Encoding</ons-col>
          <ons-col><textarea id ="cp_fov_enc" class="textarea" rows="1" style="width:100%;" disabled></textarea></ons-col>
        </ons-row>

        <ons-row style="margin-bottom: 4px;">
          <ons-col style="text-align: left;">Feature (json)</ons-col>
          <ons-col><textarea id ="cp_fov_feat" class="textarea" rows="5" style="width:100%;" disabled></textarea></ons-col>
        </ons-row>

        <p><ons-button onclick="hideDialog('my-dialog2', setCustomProps)">Close</ons-button></p>
      </div>
    </ons-dialog>
  </template>
</html>
